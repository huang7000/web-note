:::snippet 事件名

> 始终使用 kebab-case 的事件名。
> 并且 v-on 事件监听器在 DOM 模板中会被自动转换为全小写 (因为 HTML 是大小写不敏感的)

```html
<div id="app01">
    <my-component
        v-on:my-event="doSomething"
        post-title="testHtml"
        v-bind:test="test"
    ></my-component>
</div>
```

```javascript
Vue.component('my-component', {
    // 在 JavaScript 中是 camelCase 的
    props: ['test', 'PostTitle'],
    template: `
                <div class="blog-post">
      <h3>{{ PostTitle }}</h3>
      <h4>{{ test }}</h4>
      <button v-on:click="$emit('my-event')">
        Enlarge 
      </button>
    </div>`
});
new Vue({
    el: '#app01',
    data: {
        test: 'PostTitle'
    },
    methods: {
        doSomething: function(event) {
            this.test = this.test + '1233';
            console.log('输出事件');
        }
    }
});
```

:::

:::snippet 自定义组件的 v-model

> 始终使用 kebab-case 的事件名。
> 并且 v-on 事件监听器在 DOM 模板中会被自动转换为全小写 (因为 HTML 是大小写不敏感的)

```html
<div id="app03">
    <base-checkbox v-model="lovingVue"></base-checkbox>
</div>
```

```javascript
Vue.component('base-checkbox', {
    model: {
        prop: 'checked',
        event: 'change'
    },
    props: {
        checked: Boolean
    },
    template: `
    <input
      type="checkbox"
      v-bind:checked="checked"
      v-on:change="$emit('change', $event.target.checked)"
    >
  `
});
app03 = new Vue({
    el: '#app03',
    data: {
        checked: true,
        lovingVue: true
    }
});
```

:::

:::snippet 将原生事件绑定到组件

> 一个组件的根元素上直接监听一个原生事件。使用 `v-on` 的 `.native` 修饰符
> Vue 提供了一个 \$listeners 属性，它是一个对象，里面包含了作用在这个组件上的所有监听器。

```html
<base-input v-on:focus.native="onFocus"></base-input>
<div id="app05">
    <base-input v-model="label" v-bind:label="label"></base-input>
</div>
```

```javascript
Vue.component('base-input', {
    inheritAttrs: false,
    props: ['label', 'value'],
    computed: {
        inputListeners: function() {
            var vm = this;
            // `Object.assign` 将所有的对象合并为一个新对象
            return Object.assign(
                {},
                // 我们从父级添加所有的监听器
                this.$listeners,
                // 然后我们添加自定义监听器，
                // 或覆写一些监听器的行为
                {
                    // 这里确保组件配合 `v-model` 的工作
                    input: function(event) {
                        vm.$emit('input', event.target.value);
                    }
                }
            );
        }
    },
    template: `
    <label>
      {{ label }}
      <input
        v-bind="$attrs"
        v-bind:value="value"
        v-on="inputListeners"
      >
    </label>
  `
});
new Vue({
    el: '#app05',
    data: {
        label: '256',
        value: ''
    }
});
```

:::

:::snippet `.sync` 修饰符

> 推荐以 update:myPropName 的模式触发事件取而代之。
> 在一个包含 title prop 的假设的组件
> 注意带有 .sync 修饰符的 v-bind 不能和表达式一起使用 (例如 v-bind:title.sync=”doc.title + ‘!’” 是无效的)。取而代之的是，你只能提供你想要绑定的属性名，类似 v-model。
> 将 v-bind.sync 用在一个字面量的对象上，例如 v-bind.sync=”{ title: doc.title }”，是无法正常工作的，因为在解析一个像这样的复杂表达式的时候，有很多边缘情况需要考虑。

```html
<text-document
    v-bind:title="doc.title"
    v-on:update:title="doc.title = $event"
></text-document>
<text-document v-bind:title.sync="doc.title"></text-document>
<div id="app08">
    {{ doc.title }}
    <base-document
        v-bind:title="doc.title"
        v-on:update:title="doc.title =$event"
    ></base-document>
</div>
```

```javascript
Vue.component('base-document', {
    // inheritAttrs: false,
    model: {
        prop: 'title',
        event: 'input'
    },
    props: ['doc', 'value', 'title'],
    computed: {
        inputListeners: function() {
            var vm = this;
            // `Object.assign` 将所有的对象合并为一个新对象
            return Object.assign(
                {},
                // 我们从父级添加所有的监听器
                this.$listeners,
                // 然后我们添加自定义监听器，
                // 或覆写一些监听器的行为
                {
                    // 这里确保组件配合 `v-model` 的工作
                    input: function(event) {
                        //  vm.$emit('input', event.target.value);
                        vm.$emit('update:title', event.target.value);
                    }
                }
            );
        }
    },
    template: `
                    <div style="color:blue">
                                 <h2> {{title}}</h2>
                               <input  v-bind="$attrs"
                                    v-bind:value="title"
                                    v-on="inputListeners"  >
                      </div>`
});
app08 = new Vue({
    el: '#app08',
    data: {
        doc: {
            title: 'text-document'
        },
        value: ''
    }
});
```

:::
