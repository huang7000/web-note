<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Document</title>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <style type="text/css"></style>
        <script>
            let app01;
            let app02;
            let app03;
            let app04;
            let app05;
            let app06;
            let app07;
            window.onload = function() {
                Vue.component('my-component', {
                    // 在 JavaScript 中是 camelCase 的
                    props: ['test', 'PostTitle'],
                    template: `
                                    <div class="blog-post">
                          <h3>{{ PostTitle }}</h3>
                          <h4>{{ test }}</h4>
                          <button v-on:click="$emit('my-event')">
                            Enlarge text
                          </button>
                        </div>`
                });

                //    display: inherit;
                new Vue({
                    el: '#app01',
                    data: {
                        test: 'PostTitle',
                        styleObject: {
                            display: 'none'
                        }
                    },
                    methods: {
                        doSomething: function(event) {
                            this.test = this.test + '1233';
                            console.log('输出事件');
                        }
                    }
                });
                app02 = new Vue({
                    el: '#app02',
                    data: {
                        styleObject: {
                            display: 'none'
                        },
                        txtMessage: '',
                        checked: true,
                        checkedNames: []
                    }
                });
                //   v-bind:value2="checked"
                Vue.component('base-checkbox', {
                    model: {
                        prop: 'value',
                        event: 'change'
                    },
                    props: {
                        checked: Boolean,
                        lovingVue: Boolean
                    },
                    template: `
              <input
                type="checkbox"
                v-bind:checked="checked"
                v-bind:value="lovingVue"
                v-on:change="$emit('change', $event.target.checked?'show':'hide')"
              >
            `
                });
                app03 = new Vue({
                    el: '#app03',
                    data: {
                        lovingVue: 'show',
                        checked: true
                    }
                });
                Vue.component('base-checkboxs', {
                    model: {
                        prop: 'checked',
                        event: 'change'
                    },
                    props: ['label', 'checked'],
                    computed: {
                        changeListeners: function() {
                            var vm = this;
                            // `Object.assign` 将所有的对象合并为一个新对象
                            return Object.assign(
                                {},
                                // 我们从父级添加所有的监听器
                                this.$listeners,
                                // 然后我们添加自定义监听器，
                                // 或覆写一些监听器的行为
                                {
                                    // 这里确保组件配合 `v-model` 的工作
                                    change: function(event) {
                                        // vm.$emit(
                                        //     'change',
                                        //     event.target.checked
                                        //         ? 'show'
                                        //         : 'hide'
                                        // );
                                        if (event.target.checked === true) {
                                            vm.$emit('change', 'show');
                                        } else if (
                                            event.target.checked === false
                                        ) {
                                            vm.$emit('change', 'hide');
                                        } else {
                                            vm.$emit('change', 'showhide');
                                        }
                                    }
                                }
                            );
                        }
                    },
                    template: `
                            <label>{{label}}
                              <input
                                type="checkbox"
                                v-on="changeListeners"
                              >
                              </label>
                            `
                });
                //    v-bind:checked="checked"
                app04 = new Vue({
                    el: '#app04',
                    data: {
                        label: 'show'
                    }
                });
                Vue.component('base-input', {
                    inheritAttrs: false,
                    props: ['label', 'value'],
                    computed: {
                        inputListeners: function() {
                            var vm = this;
                            // `Object.assign` 将所有的对象合并为一个新对象
                            return Object.assign(
                                {},
                                // 我们从父级添加所有的监听器
                                this.$listeners,
                                // 然后我们添加自定义监听器，
                                // 或覆写一些监听器的行为
                                {
                                    // 这里确保组件配合 `v-model` 的工作
                                    input: function(event) {
                                        vm.$emit('input', event.target.value);
                                    }
                                }
                            );
                        }
                    },
                    template: `
    <label>
      {{ label }}
      <input
        v-bind="$attrs"
        v-bind:value="value"
        v-on="inputListeners"
      >
    </label>
  `
                });
                //  v-on="$listeners"
                // v-on="$listeners"
                //v-on="inputListeners"
                new Vue({
                    el: '#app05',
                    data: {
                        label: '256',
                        value: ''
                    }
                });
                Vue.component('text-document', {
                    inheritAttrs: false,
                    props: ['title'],
                    computed: {
                        inputListeners: function() {
                            var vm = this;
                            return Object.assign({}, this.$listeners, {
                                input: function(event) {
                                    vm.$emit(
                                        'update:title',
                                        event.target.value
                                    );
                                    console.log(event.target.value);
                                }
                            });
                        }
                    },
                    template: `
                        <div style="color:red">

                        子组件的title：
                       {{title}}

                        <input  v-bind="$attrs"
                                    v-on="inputListeners"
                                      >
                        </div>
                      `
                });
                app06 = new Vue({
                    el: '#app06',
                    data: {
                        doc: {
                            title: 'app06'
                        },
                        value: ''
                    }
                });
                Vue.component('base-text', {
                    inheritAttrs: false,
                    model: {
                        prop: 'doc',
                        event: 'input'
                    },
                    props: ['doc', 'value'],
                    computed: {
                        inputListeners: function() {
                            var vm = this;
                            // `Object.assign` 将所有的对象合并为一个新对象
                            return Object.assign(
                                {},
                                // 我们从父级添加所有的监听器
                                this.$listeners,
                                // 然后我们添加自定义监听器，
                                // 或覆写一些监听器的行为
                                {
                                    // 这里确保组件配合 `v-model` 的工作
                                    input: function(event) {
                                        vm.$emit('input', event.target.value);
                                    }
                                }
                            );
                        }
                    },
                    template: `
                              <div style="color:blue">
                                 <h2> {{doc.title}}</h2>
                               <input  v-bind="$attrs"
                                    v-bind:value="doc.title"
                                      >
                      </div>`
                });
                //   v-bind:value="title"
                //v-on="inputListeners"

                app07 = new Vue({
                    el: '#app07',
                    data: {
                        doc: {
                            title: '你妹妹犯二'
                        },
                        value: ''
                    }
                });
                Vue.component('base-document', {
                    // inheritAttrs: false,
                    model: {
                        prop: 'title',
                        event: 'input'
                    },
                    props: ['doc', 'value', 'title'],
                    computed: {
                        inputListeners: function() {
                            var vm = this;
                            // `Object.assign` 将所有的对象合并为一个新对象
                            return Object.assign(
                                {},
                                // 我们从父级添加所有的监听器
                                this.$listeners,
                                // 然后我们添加自定义监听器，
                                // 或覆写一些监听器的行为
                                {
                                    // 这里确保组件配合 `v-model` 的工作
                                    input: function(event) {
                                        //  vm.$emit('input', event.target.value);
                                        vm.$emit(
                                            'update:title',
                                            event.target.value
                                        );
                                    }
                                }
                            );
                        }
                    },
                    template: `
                    <div style="color:blue">
                                 <h2> {{title}}</h2>
                               <input  v-bind="$attrs"
                                    v-bind:value="title"
                                    v-on="inputListeners"  >
                      </div>`
                });
                app08 = new Vue({
                    el: '#app08',
                    data: {
                        doc: {
                            title: 'text-document'
                        },
                        value: ''
                    }
                });
            };
        </script>
    </head>

    <body>
        <div id="app01" v-bind:style="[styleObject]">
            <my-component
                v-on:my-event="doSomething"
                post-title="testHtml"
                v-bind:test="test"
            ></my-component>
        </div>
        <div id="app02" v-bind:style="[styleObject]">
            <input type="checkbox" id="checkbox" v-model="checked" />
            <label for="checkbox">{{ checked }}</label>
            <div id="checkeDiv">
                <input
                    type="checkbox"
                    id="jack"
                    value="Jack"
                    v-model="checkedNames"
                />
                <label for="jack">Jack</label>
                <input
                    type="checkbox"
                    id="john"
                    value="John"
                    v-model="checkedNames"
                />
                <label for="john">John</label>
                <input
                    type="checkbox"
                    id="mike"
                    value="Mike"
                    v-model="checkedNames"
                />
                <label for="mike">Mike</label>
                <br />
                <span>Checked names: {{ checkedNames }}</span>
            </div>
            <br />
        </div>
        <div id="app03">
            {{ lovingVue }}
            <base-checkbox v-model="lovingVue"></base-checkbox>
        </div>
        <div id="app04">
            <base-checkboxs
                v-model="label"
                v-bind:label="label"
            ></base-checkboxs>
        </div>
        <div id="app05">
            <!-- <base-input
                v-model="label"
                v-bind:label="label"
                v-on="$listeners"
            ></base-input> -->
            <base-input v-model="label" v-bind:label="label"></base-input>
        </div>
        <div id="app06">
            {{ doc.title }}
            <text-document
                v-bind:title="doc.title"
                v-on:update:title="doc.title=$event"
            ></text-document>
        </div>
        <div id="app07">
            <base-text v-bind:doc="doc"></base-text>
        </div>
        <div id="app08">
            {{ doc.title }}
            v-on:update:title="doc.title =$event"
            <base-document
                v-bind:title="doc.title"
                v-on:update:title="doc.title =$event"
            ></base-document>
        </div>
    </body>
</html>
