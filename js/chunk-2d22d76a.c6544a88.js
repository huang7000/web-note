(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d76a"],{f835:function(s,a,t){"use strict";t.r(a);var r=function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("Node.js Buffer(缓冲区)")])]),t("p",[s._v("JavaScript 语言自身只有字符串数据类型，没有二进制数据类型。\n但在处理像TCP流或文件流时，必须使用到二进制数据。\n在 Node.js中，定义了一个 Buffer 类，该类用来创建一个专门存放二进制数据的缓存区。")])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("Buffer 与字符编码")])]),t("p",[s._v("Node.js 目前支持的字符编码包括：")]),t("ol",[t("li",[s._v("ascii - 仅支持 7 位 ASCII 数据。如果设置去掉高位的话，这种编码是非常快的。")]),t("li",[s._v("utf8 - 多字节编码的 Unicode 字符。许多网页和其他文档格式都使用 UTF-8 。")]),t("li",[s._v("utf16le - 2 或 4 个字节，小字节序编码的 Unicode 字符。支持代理对（U+10000 至 U+10FFFF）。")]),t("li",[s._v("ucs2 - utf16le 的别名。")]),t("li",[s._v("base64 - Base64 编码。")]),t("li",[s._v("latin1 - 一种把 Buffer 编码成一字节编码的字符串的方式。")]),t("li",[s._v("binary - latin1 的别名。")]),t("li",[s._v("hex - 将每个字节编码为两个十六进制字符。")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" buf = Buffer.from("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'runoob'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'ascii'")]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(buf.toString("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'hex'")]),s._v("));"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 输出 72756e6f6f62")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(buf.toString("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'base64'")]),s._v("));"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 输出 cnVub29i")]),s._v("\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("创建 Buffer 类")])]),t("p",[s._v("Node.js 目前支持的字符编码包括：")]),t("ol",[t("li",[s._v("Buffer.alloc(size[, fill[, encoding]])： 返回一个指定大小的 Buffer 实例，如果没有设置 fill，则默认填满 0")]),t("li",[s._v("Buffer.allocUnsafe(size)： 返回一个指定大小的 Buffer 实例，但是它不会被初始化，所以它可能包含敏感的数据")]),t("li",[s._v("Buffer.allocUnsafeSlow(size)")]),t("li",[s._v("Buffer.from(array)： 返回一个被 array 的值初始化的新的 Buffer 实例（传入的 array 的元素只能是数字，不然就会自动被 0 覆盖）")]),t("li",[s._v("Buffer.from(arrayBuffer[, byteOffset[, length]])： 返回一个新建的与给定的 ArrayBuffer 共享同一内存的 Buffer。")]),t("li",[s._v("Buffer.from(buffer)： 复制传入的 Buffer 实例的数据，并返回一个新的 Buffer 实例")]),t("li",[s._v("Buffer.from(string[, encoding])： 返回一个被 string 的值初始化的新的 Buffer 实例")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 创建一个长度为 10、且用 0 填充的 Buffer。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" buf1 = Buffer.alloc("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 创建一个长度为 10、且用 0x1 填充的 Buffer。 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" buf2 = Buffer.alloc("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 创建一个长度为 10、且未初始化的 Buffer。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 这个方法比调用 Buffer.alloc() 更快，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 但返回的 Buffer 实例可能包含旧数据，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 因此需要使用 fill() 或 write() 重写。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" buf3 = Buffer.allocUnsafe("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 创建一个包含 [0x1, 0x2, 0x3] 的 Buffer。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" buf4 = Buffer.from(["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("]);\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 创建一个包含 UTF-8 字节 [0x74, 0xc3, 0xa9, 0x73, 0x74] 的 Buffer。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" buf5 = Buffer.from("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'tést'")]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 创建一个包含 Latin-1 字节 [0x74, 0xe9, 0x73, 0x74] 的 Buffer。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" buf6 = Buffer.from("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'tést'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'latin1'")]),s._v(");\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("写入缓冲区")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("buf.write(string[, offset[, length]][, encoding])\n")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("buf = Buffer.alloc("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("256")]),s._v(");\nlen = buf.write("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"www.runoob.com"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"写入字节数 : "')]),s._v("+  len);"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//写入字节数 : 14")]),s._v("\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("从缓冲区读取数据")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("buf = Buffer.alloc("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("26")]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(" ; i < "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("26")]),s._v(" ; i++) {\n buf[i] = i + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("97")]),s._v(";\n}\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log( buf.toString("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'ascii'")]),s._v("));       "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 输出: abcdefghijklmnopqrstuvwxyz")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log( buf.toString("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'ascii'")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v("));   "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//使用 'ascii' 编码, 并输出: abcde")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log( buf.toString("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'utf8'")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v("));    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 使用 'utf8' 编码, 并输出: abcde")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log( buf.toString("),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(")); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 使用默认的 'utf8' 编码, 并输出: abcde")]),s._v("\n")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("abcdefghijklmnopqrstuvwxyz\nabcde\nabcde\nabcde\n")])])],2)],1)},e=[],l=t("2877"),n={},p=Object(l["a"])(n,r,e,!1,null,null,null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d22d76a.c6544a88.js.map