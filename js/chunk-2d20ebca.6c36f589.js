(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20ebca"],{b149:function(s,t,a){"use strict";a.r(t);var r=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("section",[a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("装饰器")])]),a("blockquote",[a("p",[s._v("注意  装饰器是一项实验性特性，在未来的版本中可能会发生改变。\n启用实验性的装饰器特性，你必须在命令行或tsconfig.json里启用experimentalDecorators编译器选项：")])]),a("p",[s._v("命令行:")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-bash"},[s._v("bash")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("tsc --target ES5 --experimentalDecorators\n")])]),a("p",[s._v("tsconfig.json:")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-json"},[s._v("json")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-json"}},[s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"compilerOptions"')]),s._v(": {\n       "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"target"')]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"ES5"')]),s._v(",\n       "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"experimentalDecorators"')]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n   }\n}\n")])]),a("p",[s._v("装饰器是一种特殊类型的声明，它能够被附加到类声明，方法， 访问符，属性或参数上。 装饰器使用 @expression这种形式，expression求值后必须为一个函数，它会在运行时被调用，被装饰的声明信息做为参数传入。")]),a("p",[s._v("例如，有一个@sealed装饰器，我们会这样定义sealed函数：")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("sealed")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("target")]),s._v(") ")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('// do something with "target" ...')]),s._v("\n}\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("装饰器工厂")])]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("color")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("value: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")])]),s._v(") ")]),s._v("{ "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 这是一个装饰器工厂")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("target")]),s._v(") ")]),s._v("{ "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//  这是装饰器")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('// do something with "target" and "value"...')]),s._v("\n   }\n}\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("装饰器组合")])]),a("p",[s._v("在TypeScript里，当多个装饰器应用在一个声明上时会进行如下步骤的操作：")]),a("ol",[a("li",[s._v("由上至下依次对装饰器表达式求值。")]),a("li",[s._v("求值的结果会被当作函数，由下至上依次调用。\n如果我们使用装饰器工厂的话，可以通过下面的例子来观察它们求值的顺序：")])]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("f")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"f(): evaluated"')]),s._v(");\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("target, propertyKey: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(", descriptor: PropertyDescriptor")]),s._v(") ")]),s._v("{\n       "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"f(): called"')]),s._v(");\n   }\n}\n\n"),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("g")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"g(): evaluated"')]),s._v(");\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("target, propertyKey: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(", descriptor: PropertyDescriptor")]),s._v(") ")]),s._v("{\n       "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"g(): called"')]),s._v(");\n   }\n}\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" C {\n   @f()\n   @g()\n   method() {}\n}\n")])]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-console"},[s._v("console")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-console"}},[s._v("f(): evaluated\ng(): evaluated\ng(): called\nf(): called\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("装饰器求值")])]),a("p",[s._v("类中不同声明上的装饰器将按以下规定的顺序应用：")]),a("ol",[a("li",[s._v("参数装饰器，然后依次是方法装饰器，访问符装饰器，或属性装饰器应用到每个实例成员。")]),a("li",[s._v("参数装饰器，然后依次是方法装饰器，访问符装饰器，或属性装饰器应用到每个静态成员。")]),a("li",[s._v("参数装饰器应用到构造函数。")]),a("li",[s._v("类装饰器应用到类。")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("装饰器声明")])]),a("blockquote",[a("p",[s._v("类装饰器、方法装饰器、访问器装饰器、属性装饰器、参数装饰器声明规则一样\n装饰器声明在一个方法的声明之前（紧靠着方法声明）。 它会被应用到方法的 属性描述符上，可以用来监视，修改或者替换方法定义。 方法装饰器不能用在声明文件( .d.ts)，重载或者任何外部上下文（比如declare的类）中。")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("类装饰器")])]),a("p",[s._v("使用类装饰器(@sealed)的例子，应用在Greeter类")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[s._v("@sealed\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" Greeter {\n   greeting: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(";\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("message: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")])]),s._v(") {\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".greeting = message;\n   }\n   greet() {\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hello, "')]),s._v(" + "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".greeting;\n   }\n}\n")])]),a("p",[s._v("@sealed装饰器")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("sealed")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("constructor: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Function")])]),s._v(") ")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".seal("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v(");\n   "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".seal("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v(".prototype);\n}\n")])]),a("p",[s._v("重载构造函数的例子")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("classDecorator")]),s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("T")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("extends")]),s._v(" ")]),s._v("{"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v("(...args:"),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("any")]),s._v("[]):{}}>("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v(":T) {\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v(" {\n       newProperty = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"new property"')]),s._v(";\n       hello = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"override"')]),s._v(";\n   }\n}\n\n@classDecorator\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" Greeter {\n   property = "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"property"')]),s._v(";\n   hello: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(";\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("m: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")])]),s._v(") {\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".hello = m;\n   }\n}\n\n"),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Greeter("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"world"')]),s._v("));\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("方法装饰器")])]),a("p",[s._v("方法装饰器表达式会在运行时当作函数被调用，传入下列3个参数：")]),a("ol",[a("li",[s._v("对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。")]),a("li",[s._v("成员的名字。")]),a("li",[s._v("成员的属性描述符。")])]),a("p",[s._v("方法装饰器（@enumerable）的例子，应用于Greeter类的方法上")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" Greeter {\n   greeting: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(";\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("message: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")])]),s._v(") {\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".greeting = message;\n   }\n\n   @enumerable("),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(")\n   greet() {\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hello, "')]),s._v(" + "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".greeting;\n   }\n}\n")])]),a("p",[s._v("@enumerable装饰器")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("enumerable")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("value: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("boolean")])]),s._v(") ")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("target: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("any")]),s._v(", propertyKey: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(", descriptor: PropertyDescriptor")]),s._v(") ")]),s._v("{\n       descriptor.enumerable = value;\n   };\n}\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("访问器装饰器")])]),a("blockquote",[a("p",[s._v("TypeScript不允许同时装饰一个成员的get和set访问器。取而代之的是，一个成员的所有装饰的必须应用在文档顺序的第一个访问器上。这是因为，在装饰器应用于一个属性描述符时，它联合了get和set访问器，而不是分开声明的。")])]),a("p",[s._v("访问器装饰器表达式会在运行时当作函数被调用，传入下列3个参数：")]),a("ol",[a("li",[s._v("对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。")]),a("li",[s._v("成员的名字。")]),a("li",[s._v("成员的属性描述符。")])]),a("p",[s._v("访问器装饰器（@configurable）的例子，应用于Point类的成员上")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" Point {\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("private")]),s._v(" _x: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("number")]),s._v(";\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("private")]),s._v(" _y: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("number")]),s._v(";\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("x: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("number")]),s._v(", y: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("number")])]),s._v(") {\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._x = x;\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._y = y;\n   }\n\n   @configurable("),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(")\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("get")]),s._v(" x() { "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._x; }\n\n   @configurable("),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(")\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("get")]),s._v(" y() { "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._y; }\n}\n")])]),a("p",[s._v("@configurable装饰器")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("configurable")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("value: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("boolean")])]),s._v(") ")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("target: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("any")]),s._v(", propertyKey: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(", descriptor: PropertyDescriptor")]),s._v(") ")]),s._v("{\n       descriptor.configurable = value;\n   };\n}\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("属性装饰器")])]),a("p",[s._v("属性装饰器表达式会在运行时当作函数被调用，传入下列2个参数：")]),a("ol",[a("li",[s._v("对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。")]),a("li",[s._v("成员的名字。")])]),a("p",[s._v("记录这个属性的元数据，如下例所示")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" Greeter {\n   @format("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hello, %s"')]),s._v(")\n   greeting: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(";\n\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("message: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")])]),s._v(") {\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".greeting = message;\n   }\n   greet() {\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" formatString = getFormat("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"greeting"')]),s._v(");\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" formatString.replace("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"%s"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".greeting);\n   }\n}\n")])]),a("p",[s._v("@format装饰器和getFormat函数")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"reflect-metadata"')]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" formatMetadataKey = Symbol("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"format"')]),s._v(");\n\n"),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("format")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("formatString: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")])]),s._v(") ")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" Reflect.metadata(formatMetadataKey, formatString);\n}\n\n"),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("getFormat")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("target: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("any")]),s._v(", propertyKey: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")])]),s._v(") ")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" Reflect.getMetadata(formatMetadataKey, target, propertyKey);\n}\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("参数装饰器")])]),a("p",[s._v("参数装饰器表达式会在运行时当作函数被调用，传入下列3个参数：")]),a("ol",[a("li",[s._v("对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。")]),a("li",[s._v("成员的名字。")]),a("li",[s._v("参数在函数参数列表中的索引。")])]),a("p",[s._v("定义了参数装饰器（@required）并应用于Greeter类方法的一个参数：")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" Greeter {\n   greeting: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(";\n\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("message: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")])]),s._v(") {\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".greeting = message;\n   }\n\n   @validate\n   greet(@required name: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(") {\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hello "')]),s._v(" + name + "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('", "')]),s._v(" + "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".greeting;\n   }\n}\n")])]),a("p",[s._v("@required 和 @validate 装饰器")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-typescript"},[s._v("typescript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"reflect-metadata"')]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" requiredMetadataKey = Symbol("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"required"')]),s._v(");\n\n"),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("required")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("target: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(", propertyKey: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(" | symbol, parameterIndex: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("number")])]),s._v(") ")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" existingRequiredParameters: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("number")]),s._v("[] = Reflect.getOwnMetadata(requiredMetadataKey, target, propertyKey) || [];\n   existingRequiredParameters.push(parameterIndex);\n   Reflect.defineMetadata(requiredMetadataKey, existingRequiredParameters, target, propertyKey);\n}\n\n"),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("validate")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("target: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("any")]),s._v(", propertyName: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("string")]),s._v(", descriptor: TypedPropertyDescriptor<"),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Function")]),s._v(">")]),s._v(") ")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" method = descriptor.value;\n   descriptor.value = "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),a("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" requiredParameters: "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("number")]),s._v("[] = Reflect.getOwnMetadata(requiredMetadataKey, target, propertyName);\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (requiredParameters) {\n           "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" parameterIndex of requiredParameters) {\n               "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (parameterIndex >= "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("arguments")]),s._v(".length || "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("arguments")]),s._v("[parameterIndex] === "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(") {\n                   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("throw")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Error")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Missing required argument."')]),s._v(");\n               }\n           }\n       }\n       "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" method.apply("),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("arguments")]),s._v(");\n   }\n}\n")])])],2)],1)},e=[],p=a("2877"),n={},l=Object(p["a"])(n,r,e,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d20ebca.6c36f589.js.map