(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ae92b"],{"0b47":function(s,t,a){"use strict";a.r(t);var e=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("section",[a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("Module")])]),a("p",[s._v("Vuex 允许我们将 store 分割成模块（module）。每个模块拥有自己的 state、mutation、action、getter、甚至是嵌套子模块——从上至下进行同样方式的分割：")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" moduleA = {\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("state")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" ({ ... }),\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("mutations")]),s._v(": { ... },\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("actions")]),s._v(": { ... },\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getters")]),s._v(": { ... }\n}\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" moduleB = {\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("state")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" ({ ... }),\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("mutations")]),s._v(": { ... },\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("actions")]),s._v(": { ... }\n}\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" store = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Vuex.Store({\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("modules")]),s._v(": {\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("a")]),s._v(": moduleA,\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("b")]),s._v(": moduleB\n }\n})\n\nstore.state.a "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> moduleA 的状态")]),s._v("\nstore.state.b "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> moduleB 的状态")]),s._v("\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("模块的局部状态")])]),a("p",[s._v("对于模块内部的 mutation 和 getter，接收的第一个参数是模块的局部状态对象。")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" moduleA = {\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("state")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" ({\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("count")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(",\n }),\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("mutations")]),s._v(": {\n   increment(state) {\n     "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 这里的 `state` 对象是模块的局部状态")]),s._v("\n     state.count++;\n   },\n },\n\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getters")]),s._v(": {\n   doubleCount(state) {\n     "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" state.count * "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(";\n   },\n },\n};\n")])]),a("p",[s._v("对于模块内部的 action，局部状态通过 context.state 暴露出来，根节点状态则为 context.rootState：")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" moduleA = {\n "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ...")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("actions")]),s._v(": {\n   incrementIfOddOnRootSum({ state, commit, rootState }) {\n     "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ((state.count + rootState.count) % "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" === "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n       commit("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"increment"')]),s._v(");\n     }\n   },\n },\n};\n")])]),a("p",[s._v("对于模块内部的 getter，根节点状态会作为第三个参数暴露出来：")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" moduleA = {\n "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ...")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getters")]),s._v(": {\n   sumWithRootCount(state, getters, rootState) {\n     "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" state.count + rootState.count;\n   },\n },\n};\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("命名空间")])]),a("p",[s._v("默认情况下，模块内部的 action、mutation 和 getter 是注册在全局命名空间的\n通过添加 namespaced: true 的方式使其成为带命名空间的模块。当模块被注册后，它的所有 getter、action 及 mutation 都会自动根据模块注册的路径调整命名。")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" store = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Vuex.Store({\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("modules")]),s._v(": {\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("account")]),s._v(": {\n     "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("namespaced")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n\n     "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 模块内容（module assets）")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("state")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" ({ ... }), "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 模块内的状态已经是嵌套的了，使用 `namespaced` 属性不会对其产生影响")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getters")]),s._v(": {\n       isAdmin () { ... } "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> getters['account/isAdmin']")]),s._v("\n     },\n     "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("actions")]),s._v(": {\n       login () { ... } "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> dispatch('account/login')")]),s._v("\n     },\n     "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("mutations")]),s._v(": {\n       login () { ... } "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> commit('account/login')")]),s._v("\n     },\n\n     "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 嵌套模块")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("modules")]),s._v(": {\n       "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 继承父模块的命名空间")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("myPage")]),s._v(": {\n         "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("state")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" ({ ... }),\n         "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getters")]),s._v(": {\n           profile () { ... } "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> getters['account/profile']")]),s._v("\n         }\n       },\n\n       "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 进一步嵌套命名空间")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("posts")]),s._v(": {\n         "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("namespaced")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n\n         "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("state")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" ({ ... }),\n         "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getters")]),s._v(": {\n           popular () { ... } "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> getters['account/posts/popular']")]),s._v("\n         }\n       }\n     }\n   }\n }\n})\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("在带命名空间的模块内访问全局内容（Global Assets）")])]),a("p",[s._v("使用全局 state 和 getter，rootState 和 rootGetters 会作为第三和第四参数传入 getter，也会通过 context 对象的属性传入 action。\n若需要在全局命名空间内分发 action 或提交 mutation，将 { root: true } 作为第三参数传给 dispatch 或 commit 即可。")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("modules: {\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("foo")]),s._v(": {\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("namespaced")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getters")]),s._v(": {\n     "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 在这个模块的 getter 中，`getters` 被局部化了")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 你可以使用 getter 的第四个参数来调用 `rootGetters`")]),s._v("\n     someGetter (state, getters, rootState, rootGetters) {\n       getters.someOtherGetter "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> 'foo/someOtherGetter'")]),s._v("\n       rootGetters.someOtherGetter "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> 'someOtherGetter'")]),s._v("\n     },\n     "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("someOtherGetter")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("state")]),s._v(" =>")]),s._v(" { ... }\n   },\n\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("actions")]),s._v(": {\n     "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 在这个模块中， dispatch 和 commit 也被局部化了")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 他们可以接受 `root` 属性以访问根 dispatch 或 commit")]),s._v("\n     someAction ({ dispatch, commit, getters, rootGetters }) {\n       getters.someGetter "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> 'foo/someGetter'")]),s._v("\n       rootGetters.someGetter "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> 'someGetter'")]),s._v("\n\n       dispatch("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'someOtherAction'")]),s._v(") "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> 'foo/someOtherAction'")]),s._v("\n       dispatch("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'someOtherAction'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(", { "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("root")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(" }) "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> 'someOtherAction'")]),s._v("\n\n       commit("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'someMutation'")]),s._v(") "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> 'foo/someMutation'")]),s._v("\n       commit("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'someMutation'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(", { "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("root")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(" }) "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> 'someMutation'")]),s._v("\n     },\n     someOtherAction (ctx, payload) { ... }\n   }\n }\n}\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("在带命名空间的模块注册全局 action")])]),a("p",[s._v("带命名空间的模块注册全局 action，你可添加 root: true，并将这个 action 的定义放在函数 handler 中。")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("{\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("actions")]),s._v(": {\n   someOtherAction ({dispatch}) {\n     dispatch("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'someAction'")]),s._v(")\n   }\n },\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("modules")]),s._v(": {\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("foo")]),s._v(": {\n     "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("namespaced")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n\n     "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("actions")]),s._v(": {\n       "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("someAction")]),s._v(": {\n         "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("root")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n         handler (namespacedContext, payload) { ... } "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> 'someAction'")]),s._v("\n       }\n     }\n   }\n }\n}\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("带命名空间的绑定函数")])]),a("p",[s._v("带命名空间的模块注册全局 action，你可添加 root: true，并将这个 action 的定义放在函数 handler 中。")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("computed: {\n ...mapState("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'some/nested/module'")]),s._v(", {\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("a")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("state")]),s._v(" =>")]),s._v(" state.a,\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("b")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("state")]),s._v(" =>")]),s._v(" state.b\n })\n},\n"),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n ...mapActions("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'some/nested/module'")]),s._v(", [\n   "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'foo'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> this.foo()")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'bar'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// -> this.bar()")]),s._v("\n ])\n}\n")])]),a("p",[s._v("可以通过使用 createNamespacedHelpers 创建基于某个命名空间辅助函数。它返回一个对象，对象里有新的绑定在给定命名空间值上的组件绑定辅助函数：")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" { createNamespacedHelpers } "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"vuex"')]),s._v(";\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" { mapState, mapActions } = createNamespacedHelpers("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"some/nested/module"')]),s._v(");\n\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("computed")]),s._v(": {\n   "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 在 `some/nested/module` 中查找")]),s._v("\n   ...mapState({\n     "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("a")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("state")]),s._v(") =>")]),s._v(" state.a,\n     "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("b")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("state")]),s._v(") =>")]),s._v(" state.b,\n   }),\n },\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n   "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 在 `some/nested/module` 中查找")]),s._v("\n   ...mapActions(["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"foo"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"bar"')]),s._v("]),\n },\n};\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("给插件开发者的注意事项")])]),a("p",[s._v("开发的插件（Plugin）提供了模块并允许用户将其添加到 Vuex store，可能需要考虑模块的空间名称问题。对于这种情况，你可以通过插件的参数对象来允许用户指定空间名称：")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 通过插件的参数对象得到空间名称")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 然后返回 Vuex 插件函数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("createPlugin")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("options = {}")]),s._v(") ")]),s._v("{\n "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("store")]),s._v(") ")]),s._v("{\n   "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 把空间名字添加到插件模块的类型（type）中去")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" namespace = options.namespace || "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(";\n   store.dispatch(namespace + "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pluginAction"')]),s._v(");\n };\n}\n")])])],2),a("hv-snippet",{attrs:{title:""}},[a("template",{slot:"title"},[a("p",[s._v("模块动态注册")])]),a("p",[s._v("在 store 创建之后，你可以使用 store.registerModule 方法注册模块：")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" Vuex "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"vuex"')]),s._v(";\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" store = "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Vuex.Store({\n "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("/* 选项 */")]),s._v("\n});\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 注册模块 `myModule`")]),s._v("\nstore.registerModule("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"myModule"')]),s._v(", {\n "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ...")]),s._v("\n});\n"),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 注册嵌套模块 `nested/myModule`")]),s._v("\nstore.registerModule(["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"nested"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"myModule"')]),s._v("], {\n "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ...")]),s._v("\n});\n")])]),a("blockquote",[a("p",[s._v("可以通过 store.state.myModule 和 store.state.nested.myModule 访问模块的状态。")])]),a("p",[s._v("需要创建一个模块的多个实例")]),a("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" MyReusableModule = {\n "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("state")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" ({\n   "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("foo")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"bar"')]),s._v(",\n }),\n "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// mutation, action 和 getter 等等...")]),s._v("\n};\n")])])],2)],1)},r=[],n=a("2877"),p={},l=Object(n["a"])(p,e,r,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0ae92b.5e86a82b.js.map