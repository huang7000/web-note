(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2378b5"],{fc24:function(s,a,t){"use strict";t.r(a);var r=function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("路由元信息")])]),t("p",[s._v("定义路由的时候可以配置 meta 字段")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" router = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" VueRouter({\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("routes")]),s._v(": [\n   {\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("path")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/foo"')]),s._v(",\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("component")]),s._v(": Foo,\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("children")]),s._v(": [\n       {\n         "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("path")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"bar"')]),s._v(",\n         "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("component")]),s._v(": Bar,\n         "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// a meta field")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("meta")]),s._v(": { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("requiresAuth")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(" },\n       },\n     ],\n   },\n ],\n});\n")])]),t("p",[s._v("meta 展示在全局导航守卫中检查元字段")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("router.beforeEach("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("to, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(", next")]),s._v(") =>")]),s._v(" {\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (to.matched.some("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("record")]),s._v(") =>")]),s._v(" record.meta.requiresAuth)) {\n   "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// this route requires auth, check if logged in")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// if not, redirect to login page.")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (!auth.loggedIn()) {\n     next({\n       "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("path")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/login"')]),s._v(",\n       "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("query")]),s._v(": { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("redirect")]),s._v(": to.fullPath },\n     });\n   } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n     next();\n   }\n } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n   next(); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 确保一定要调用 next()")]),s._v("\n }\n});\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("过渡动效")])]),t("p",[t("code",{pre:!0},[s._v("<router-view>")]),s._v("是基本的动态组件，所以我们可以用 "),t("code",{pre:!0},[s._v("<transition>")]),s._v(" 组件给它添加一些过渡效果。\n"),t("code",{pre:!0},[s._v("Transition")]),s._v(" 的所有功能 在这里同样适用。")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-html"},[s._v("html")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("transition")]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("router-view")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("router-view")]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("transition")]),s._v(">")]),s._v("\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("单个路由的过渡")])]),t("p",[s._v("每个路由组件有各自的过渡效果，可以在各路由组件内使用 "),t("code",{pre:!0},[s._v("<transition>")]),s._v("并设置不同的 name。")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" Foo = {\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("template")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('`\n   <transition name="slide">\n     <div class="foo">...</div>\n   </transition>\n `')]),s._v(",\n};\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" Bar = {\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("template")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('`\n   <transition name="fade">\n     <div class="bar">...</div>\n   </transition>\n `')]),s._v(",\n};\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("基于路由的动态过渡")])]),t("p",[s._v("每个路由组件有各自的过渡效果，可以在各路由组件内使用 "),t("code",{pre:!0},[s._v("<transition>")]),s._v("并设置不同的 name。")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-html"},[s._v("html")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("\x3c!-- 使用动态的 transition name --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("transition")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":name")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"transitionName"')]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("router-view")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("router-view")]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("transition")]),s._v(">")]),s._v("\n")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 接着在父组件内")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// watch $route 决定使用哪种过渡")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("watch")]),s._v(": {\n "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'$route'")]),s._v(" (to, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(") {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" toDepth = to.path.split("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/'")]),s._v(").length\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" fromDepth = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(".path.split("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/'")]),s._v(").length\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".transitionName = toDepth < fromDepth ? "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'slide-right'")]),s._v(" : "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'slide-left'")]),s._v("\n }\n}\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("数据获取")])]),t("p",[s._v("进入某个路由后，需要从服务器获取数据。")]),t("ol",[t("li",[s._v("导航完成之后获取：先完成导航，然后在接下来的组件生命周期钩子中获取数据。在数据获取期间显示“加载中”之类的指示。")]),t("li",[s._v("导航完成之前获取：导航完成前，在路由进入的守卫中获取数据，在数据获取成功后执行导航。")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("导航完成后获取数据")])]),t("p",[s._v("导航和渲染组件，然后在组件的 created 钩子中获取数据。\n在数据获取期间展示一个 loading 状态，还可以在不同视图间展示不同的 loading 状态。")]),t("p",[s._v("Post 组件，需要基于 $route.params.id 获取文章数据：")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-html"},[s._v("html")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"post"')]),s._v(">")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"loading"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"loading"')]),s._v(">")]),s._v("\n     Loading...\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"error"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"error"')]),s._v(">")]),s._v("\n     {{ error }}\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"post"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"content"')]),s._v(">")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("h2")]),s._v(">")]),s._v("{{ post.title }}"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("h2")]),s._v(">")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("{{ post.body }}"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n data() {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("loading")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("post")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(",\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("error")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(",\n   };\n },\n created() {\n   "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 组件创建完后获取数据，")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 此时 data 已经被 observed 了")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".fetchData();\n },\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("watch")]),s._v(": {\n   "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 如果路由有变化，会再次执行该方法")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("$route")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"fetchData"')]),s._v(",\n },\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n   fetchData() {\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".error = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".post = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(";\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".loading = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(";\n     "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// replace getPost with your data fetching util / API wrapper")]),s._v("\n     getPost("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$route.params.id, (err, post) => {\n       "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".loading = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(";\n       "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (err) {\n         "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".error = err.toString();\n       } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n         "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".post = post;\n       }\n     });\n   },\n },\n};\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("在导航完成前获取数据")])]),t("p",[s._v("在导航转入新的路由前获取数据。在接下来的组件的 beforeRouteEnter 守卫中获取数据，当数据获取成功后只调用 next 方法")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n data() {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("post")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(",\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("error")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(",\n   };\n },\n beforeRouteEnter(to, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(", next) {\n   getPost(to.params.id, (err, post) => {\n     next("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("vm")]),s._v(") =>")]),s._v(" vm.setData(err, post));\n   });\n },\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 路由改变前，组件就已经渲染完了")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 逻辑稍稍不同")]),s._v("\n beforeRouteUpdate(to, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(", next) {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".post = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(";\n   getPost(to.params.id, (err, post) => {\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".setData(err, post);\n     next();\n   });\n },\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n   setData(err, post) {\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (err) {\n       "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".error = err.toString();\n     } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n       "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".post = post;\n     }\n   },\n },\n};\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("滚动行为")])]),t("p",[s._v("使用前端路由，当切换到新路由时，想要页面滚到顶部，或者是保持原先的滚动位置，就像重新加载页面那样。")]),t("p",[s._v("Router 实例，提供一个 scrollBehavior 方法")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" router = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" VueRouter({\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("routes")]),s._v(": [...],\n scrollBehavior (to, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(", savedPosition) {\n   "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// return 期望滚动到哪个的位置")]),s._v("\n }\n})\n")])]),t("blockquote",[t("p",[s._v("方法返回滚动位置的对象信息：\n{ x: number, y: number }\n{ selector: string, offset? : { x: number, y: number }} (offset 只在 2.6.0+ 支持)")])]),t("p",[s._v("对于所有路由导航，简单地让页面滚动到顶部。")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("scrollBehavior (to, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(", savedPosition) {\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("x")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("y")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(" }\n}\n")])]),t("p",[s._v("在按下 后退/前进 按钮时，就会像浏览器的原生表现")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("scrollBehavior (to, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(", savedPosition) {\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (savedPosition) {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" savedPosition\n } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("x")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("y")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(" }\n }\n}\n")])]),t("p",[s._v("模拟“滚动到锚点”的行为")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("scrollBehavior (to, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(", savedPosition) {\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (to.hash) {\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("selector")]),s._v(": to.hash\n   }\n }\n}\n")])]),t("p",[s._v("异步滚动返回一个 Promise 来得出预期的位置描述：")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("scrollBehavior (to, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(", savedPosition) {\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("resolve, reject")]),s._v(") =>")]),s._v(" {\n   setTimeout("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" {\n     resolve({ "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("x")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("y")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(" })\n   }, "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("500")]),s._v(")\n })\n}\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("路由懒加载")])]),t("p",[s._v("结合 Vue 的异步组件和 Webpack 的代码分割功能，实现路由组件的懒加载。")]),t("ol",[t("li",[s._v("可以将异步组件定义为返回一个 Promise 的工厂函数 (该函数返回的 Promise 应该 resolve 组件本身)：")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" Foo = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v(".resolve({\n   "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("/* 组件定义对象 */")]),s._v("\n });\n")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("在 Webpack 2 中，我们可以使用动态 import 语法来定义代码分块点 (split point)：")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"./Foo.vue"')]),s._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 返回 Promise")]),s._v("\n")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("结合这两者，这就是如何定义一个能够被 Webpack 自动代码分割的异步组件。")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" Foo = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"./Foo.vue"')]),s._v(");\n")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("在路由配置中什么都不需要改变，只需要像往常一样使用 Foo：")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" router = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" VueRouter({\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("routes")]),s._v(": [{ "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("path")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/foo"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("component")]),s._v(": Foo }],\n});\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("把组件按组分块")])]),t("p",[s._v("把某个路由下的所有组件都打包在同个异步块 (chunk) 中。只需要使用 命名 chunk，一个特殊的注释语法来提供 chunk name (需要 Webpack > 2.4)。")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" Foo = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('/* webpackChunkName: "group-foo" */')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"./Foo.vue"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" Bar = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('/* webpackChunkName: "group-foo" */')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"./Bar.vue"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" Baz = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('/* webpackChunkName: "group-foo" */')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"./Baz.vue"')]),s._v(");\n")])])],2)],1)},e=[],p=t("2877"),n={},v=Object(p["a"])(n,r,e,!1,null,null,null);a["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d2378b5.bd88cebc.js.map