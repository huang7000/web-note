(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cffea"],{"65a6":function(s,a,t){"use strict";t.r(a);var r=function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("Express 框架")])]),t("p",[s._v("Express 是一个简洁而灵活的 node.js Web 应用框架, 提供了一系列强大特性帮助你创建各种 Web 应用，和丰富的 HTTP 工具。\nExpress 框架核心特性：")]),t("ol",[t("li",[s._v("可以设置中间件来响应 HTTP 请求。")]),t("li",[s._v("定义了路由表用于执行不同的 HTTP 请求动作。")]),t("li",[s._v("可以通过向模板传递参数来动态渲染 HTML 页面。")])]),t("p",[s._v("安装 Express 并将其保存到依赖列表中")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-node"},[s._v("node")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-node"}},[s._v("cnpm install express --save\n")])]),t("ol",[t("li",[s._v("body-parser - node.js 中间件，用于处理 JSON, Raw, Text 和 URL 编码的数据。")]),t("li",[s._v("cookie-parser - 这就是一个解析 Cookie 的工具。通过 req.cookies 可以取到传过来的 cookie，并把它们转成对象。")]),t("li",[s._v('multer - node.js 中间件，用于处理 enctype="multipart/form-data"（设置表单的 MIME 编码）的表单数据。')])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-node"},[s._v("node")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-node"}},[s._v("cnpm install body-parser --save\ncnpm install cookie-parser --save\ncnpm install multer --save\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("第一个 Express 框架实例")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//express_demo.js 文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" express = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"express"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" app = express();\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n res.send("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hello World"')]),s._v(");\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" server = app.listen("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8081")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" host = server.address().address;\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" port = server.address().port;\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"应用实例，访问地址为 http://127.0.0.1:8081/"')]),s._v(", host, port);\n});\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("请求和响应")])]),t("ol",[t("li",[s._v("Express 应用使用回调函数的参数： request 和 response 对象来处理请求和响应的数据。")]),t("li",[s._v("Request 对象 - request 对象表示 HTTP 请求，包含了请求查询字符串，参数，内容，HTTP 头部等属性。")]),t("li",[s._v("Response 对象 - response 对象表示 HTTP 响应，即在接收到请求时向客户端发送的 HTTP 响应数据。")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("app.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// --")]),s._v("\n});\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("请求和响应")])]),t("p",[s._v("路由决定了由谁(指定脚本)去响应客户端请求。\n在 HTTP 请求中，我们可以通过路由提取出请求的 URL 以及 GET/POST 参数。")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" express = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"express"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" app = express();\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//  主页输出 "Hello World"')]),s._v("\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"主页 GET 请求"')]),s._v(");\n res.send("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hello GET"')]),s._v(");\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//  POST 请求")]),s._v("\napp.post("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"主页 POST 请求"')]),s._v(");\n res.send("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hello POST"')]),s._v(");\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//  /del_user 页面响应")]),s._v("\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/del_user"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/del_user 响应 DELETE 请求"')]),s._v(");\n res.send("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"删除页面"')]),s._v(");\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//  /list_user 页面 GET 请求")]),s._v("\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/list_user"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/list_user GET 请求"')]),s._v(");\n res.send("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"用户列表页面"')]),s._v(");\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 对页面 abcd, abxcd, ab123cd, 等响应 GET 请求")]),s._v("\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/ab*cd"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/ab*cd GET 请求"')]),s._v(");\n res.send("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"正则匹配"')]),s._v(");\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" server = app.listen("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8081")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" host = server.address().address;\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" port = server.address().port;\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"应用实例，访问地址为 http://127.0.0.1:8081/"')]),s._v(", host, port);\n});\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("静态文件")])]),t("p",[s._v("Express 提供了内置的中间件 express.static 来设置静态文件如：图片， CSS, JavaScript 等。\n你可以使用 express.static 中间件来设置静态文件路径。例如，如果你将图片， CSS, JavaScript 文件放在 public 目录下")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" express = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"express"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" app = express();\napp.use("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/public"')]),s._v(", express.static("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"public"')]),s._v("));\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n res.send("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hello World"')]),s._v(");\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" server = app.listen("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8081")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" host = server.address().address;\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" port = server.address().port;\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"应用实例，访问地址为 http://127.0.0.1:8081/"')]),s._v(", host, port);\n});\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("GET 方法")])]),t("p",[s._v("index.html")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-html"},[s._v("html")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("html")]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("body")]),s._v(">")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("action")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"http://127.0.0.1:8081/process_get"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("method")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"GET"')]),s._v(">")]),s._v("\n     First Name: "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"first_name"')]),s._v(" />")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("br")]),s._v(" />")]),s._v("\n\n     Last Name: "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"last_name"')]),s._v(" />")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"submit"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Submit"')]),s._v(" />")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("body")]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("html")]),s._v(">")]),s._v("\n")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" express = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"express"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" app = express();\napp.use("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/public"')]),s._v(", express.static("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"public"')]),s._v("));\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/index.html"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n res.sendFile(__dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"index.html"')]),s._v(");\n});\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/process_get"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 输出 JSON 格式")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" response = {\n   "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("first_name")]),s._v(": req.query.first_name,\n   "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("last_name")]),s._v(": req.query.last_name,\n };\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(response);\n res.end("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".stringify(response));\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" server = app.listen("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8081")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" host = server.address().address;\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" port = server.address().port;\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"应用实例，访问地址为 http://127.0.0.1:8081/"')]),s._v(", host, port);\n});\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("POST 方法")])]),t("p",[s._v("index.html")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-html"},[s._v("html")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("html")]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("body")]),s._v(">")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("action")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"http://127.0.0.1:8081/process_post"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("method")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"POST"')]),s._v(">")]),s._v("\n     First Name: "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"first_name"')]),s._v(" />")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("br")]),s._v(" />")]),s._v("\n\n     Last Name: "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"last_name"')]),s._v(" />")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"submit"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Submit"')]),s._v(" />")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("body")]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("html")]),s._v(">")]),s._v("\n")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" express = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"express"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" app = express();\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" bodyParser = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"body-parser"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 创建 application/x-www-form-urlencoded 编码解析")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" urlencodedParser = bodyParser.urlencoded({ "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("extended")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(" });\napp.use("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/public"')]),s._v(", express.static("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"public"')]),s._v("));\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/index.html"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n res.sendFile(__dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"index.html"')]),s._v(");\n});\napp.post("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/process_post"')]),s._v(", urlencodedParser, "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 输出 JSON 格式")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" response = {\n   "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("first_name")]),s._v(": req.body.first_name,\n   "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("last_name")]),s._v(": req.body.last_name,\n };\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(response);\n res.end("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".stringify(response));\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" server = app.listen("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8081")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" host = server.address().address;\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" port = server.address().port;\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"应用实例，访问地址为 http://127.0.0.1:8081/"')]),s._v(", host, port);\n});\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("文件上传")])]),t("p",[s._v("index.html")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-html"},[s._v("html")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("html")]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("head")]),s._v(">")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("title")]),s._v(">")]),s._v("文件上传表单"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("title")]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("head")]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("body")]),s._v(">")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("h3")]),s._v(">")]),s._v("文件上传："),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("h3")]),s._v(">")]),s._v("\n   选择一个文件上传: "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("br")]),s._v(" />")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("action")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/file_upload"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("method")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"post"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("enctype")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"multipart/form-data"')]),s._v(">")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"file"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"image"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("size")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"50"')]),s._v(" />")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("br")]),s._v(" />")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("input")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"submit"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"上传文件"')]),s._v(" />")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("form")]),s._v(">")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("body")]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("html")]),s._v(">")]),s._v("\n")])]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" express = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"express"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" app = express();\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" fs = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"fs"')]),s._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" bodyParser = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"body-parser"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" multer = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"multer"')]),s._v(");\n\napp.use("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/public"')]),s._v(", express.static("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"public"')]),s._v("));\napp.use(bodyParser.urlencoded({ "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("extended")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(" }));\napp.use(multer({ "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("dest")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/tmp/"')]),s._v(" }).array("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"image"')]),s._v("));\n\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/index.html"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n res.sendFile(__dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"index.html"')]),s._v(");\n});\n\napp.post("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/file_upload"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(req.files["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("]); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 上传的文件信息")]),s._v("\n\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" des_file = __dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + req.files["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].originalname;\n fs.readFile(req.files["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].path, "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("err, data")]),s._v(") ")]),s._v("{\n   fs.writeFile(des_file, data, "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("err")]),s._v(") ")]),s._v("{\n     "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (err) {\n       "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(err);\n     } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n       response = {\n         "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"File uploaded successfully"')]),s._v(",\n         "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("filename")]),s._v(": req.files["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].originalname,\n       };\n     }\n     "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(response);\n     res.end("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".stringify(response));\n   });\n });\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" server = app.listen("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8081")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" host = server.address().address;\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" port = server.address().port;\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"应用实例，访问地址为 http://127.0.0.1:8081/"')]),s._v(", host, port);\n});\n")])])],2),t("hv-snippet",{attrs:{title:""}},[t("template",{slot:"title"},[t("p",[s._v("express 增删查改案例")])]),t("p",[s._v("users.json")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-json"},[s._v("json")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-json"}},[s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"data"')]),s._v(": [\n   {\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"name"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(",\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"password"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"password"')]),s._v(",\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"profession"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"profession"')]),s._v(",\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"id"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n   },\n   {\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"name"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"ramesh"')]),s._v(",\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"password"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"password3"')]),s._v(",\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"profession"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"clerk"')]),s._v(",\n     "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v('"id"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("\n   }\n ]\n}\n")])]),t("p",[s._v("express_demo.js")]),t("div",{staticClass:"hv-snippet--tag hv-snippet--tag-javascript"},[s._v("javascript")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" express = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"express"')]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" app = express();\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" fs = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"fs"')]),s._v(");\n\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/listUsers"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n fs.readFile(__dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"users.json"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"utf8"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("err, data")]),s._v(") ")]),s._v("{\n   "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".parse(data).data);\n   res.end(data);\n });\n});\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//显示用户详情")]),s._v("\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/user/:id"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 首先我们读取已存在的用户")]),s._v("\n fs.readFile(__dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"users.json"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"utf8"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("err, data")]),s._v(") ")]),s._v("{\n   data = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".parse(data).data;\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" user = data.find("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("user")]),s._v(") =>")]),s._v(" (user.id = req.params.id));\n   "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(user);\n   res.end("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".stringify(user));\n });\n});\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//添加的新用户数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" addUser = {\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"add"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("password")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"add"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("profession")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"add"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(",\n};\n\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/addUser"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 读取已存在的数据")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" resData = {\n   "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("data")]),s._v(": [],\n };\n fs.readFile(__dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"users.json"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"utf8"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("err, data")]),s._v(") ")]),s._v("{\n   data = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".parse(data).data;\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" user = data.find("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("user")]),s._v(") =>")]),s._v(" user.id === addUser.id);\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (user === "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(" || user === "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(") {\n     data.push(addUser);\n   }\n   resData.data = data;\n   fs.writeFileSync(__dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"users.json"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".stringify(resData));\n   res.end("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".stringify(data));\n });\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//添加的新用户数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" editUser = {\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("password")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"password"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("profession")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"profession"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(",\n};\n\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/editUser"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 读取已存在的数据")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" resData = {\n   "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("data")]),s._v(": [],\n };\n fs.readFile(__dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"users.json"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"utf8"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("err, data")]),s._v(") ")]),s._v("{\n   data = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".parse(data).data;\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" user = data.find("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("user")]),s._v(") =>")]),s._v(" user.id === editUser.id);\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (user !== "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(") {\n     data = data.map("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("item")]),s._v(") =>")]),s._v(" (item.id === editUser.id ? editUser : item));\n   }\n   resData.data = data;\n   fs.writeFileSync(__dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"users.json"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".stringify(resData));\n   res.end("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".stringify(data));\n });\n});\n\napp.get("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/deleteUser/:id"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("req, res")]),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" resData = {\n   "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("data")]),s._v(": [],\n };\n "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// First read existing users.")]),s._v("\n fs.readFile(__dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"users.json"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"utf8"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("err, data")]),s._v(") ")]),s._v("{\n   data = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".parse(data).data;\n   "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" user = data.find("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("user")]),s._v(") =>")]),s._v(" user.id === req.params.id);\n   data = data.filter("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("user")]),s._v(") =>")]),s._v(" user.id != req.params.id);\n   resData.data = data;\n   fs.writeFileSync(__dirname + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"/"')]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"users.json"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".stringify(resData));\n   res.end("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("JSON")]),s._v(".stringify(data));\n });\n});\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" server = app.listen("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8081")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" host = server.address().address;\n "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" port = server.address().port;\n "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"应用实例，访问地址为 http://127.0.0.1:8081/"')]),s._v(", host, port);\n});\n")])])],2)],1)},p=[],e=t("2877"),n={},l=Object(e["a"])(n,r,p,!1,null,null,null);a["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0cffea.894c59a1.js.map